{"remainingRequest":"/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/src/views/Setting.vue?vue&type=style&index=0&id=f29285f4&lang=less&scoped=true","dependencies":[{"path":"/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/src/views/Setting.vue","mtime":1663211991320},{"path":"/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":499162500000},{"path":"/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgLnNldGluZy1ib3ggewogICAgLnNhdmUtYnRuIHsKICAgICAgd2lkdGg6IDgwJTsKICAgICAgbWFyZ2luOiAyMHB4IGF1dG8gOwogICAgfQogIH0K"},{"version":3,"sources":["/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/src/views/Setting.vue"],"names":[],"mappings":";EAwEE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACR,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE;IACpB;EACF","file":"/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/src/views/Setting.vue","sourceRoot":"","sourcesContent":["<!--\n\n *\n-->\n\n<template>\n  <div class=\"seting-box\">\n    <s-header :name=\"'账号管理'\"></s-header>\n    <div class=\"input-item\">\n      <van-field v-model=\"nickName\" label=\"昵称\" />\n      <van-field v-model=\"introduceSign\" label=\"个性签名\" />\n      <van-field v-model=\"password\" type='password' label=\"修改密码\" />\n    </div>\n    <van-button round class=\"save-btn\" color=\"#1baeae\" type=\"primary\" @click=\"save\" block>保存</van-button>\n    <van-button round class=\"save-btn\" color=\"#1baeae\" type=\"primary\" @click=\"handleLogout\" block>退出登录</van-button>\n  </div>\n</template>\n\n<script>\nimport { reactive, onMounted, toRefs } from 'vue'\nimport md5 from 'js-md5'\nimport sHeader from '@/components/SimpleHeader'\nimport { getUserInfo, EditUserInfo, logout } from '@/service/user'\nimport { setLocal } from '@/common/js/utils'\nimport { Toast } from 'vant'\nexport default {\n  components: {\n    sHeader\n  },\n  setup() {\n    const state = reactive({\n      nickName: '',\n      introduceSign: '',\n      password: ''\n    })\n\n    onMounted(async () => {\n      const { data } = await getUserInfo()\n      state.nickName = data.nickName\n      state.introduceSign = data.introduceSign\n    })\n\n    const save = async () => {\n      const params = {\n        introduceSign: state.introduceSign,\n        nickName: state.nickName\n      }\n      if (state.password) {\n        params.passwordMd5 = md5(state.password)\n      } \n      await EditUserInfo(params)\n      Toast.success('保存成功')\n    }\n\n    const handleLogout = async () => {\n      const { resultCode } = await logout()\n      if (resultCode == 200) {\n        setLocal('token', '')\n        window.location.href = '/home'\n      }\n    }\n\n    return {\n      ...toRefs(state),\n      save,\n      handleLogout\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .seting-box {\n    .save-btn {\n      width: 80%;\n      margin: 20px auto ;\n    }\n  }\n</style>\n"]}]}
{"remainingRequest":"/home/erfenjiao/web/newbee-mall-vue3-app-main/node_modules/babel-loader/lib/index.js!/home/erfenjiao/web/newbee-mall-vue3-app-main/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/home/erfenjiao/web/newbee-mall-vue3-app-main/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/erfenjiao/web/newbee-mall-vue3-app-main/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/erfenjiao/web/newbee-mall-vue3-app-main/src/views/Order.vue?vue&type=template&id=3c1ef684&scoped=true","dependencies":[{"path":"/home/erfenjiao/web/newbee-mall-vue3-app-main/src/views/Order.vue","mtime":1663211991275},{"path":"/home/erfenjiao/web/newbee-mall-vue3-app-main/babel.config.js","mtime":1663084725000},{"path":"/home/erfenjiao/web/newbee-mall-vue3-app-main/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/erfenjiao/web/newbee-mall-vue3-app-main/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/home/erfenjiao/web/newbee-mall-vue3-app-main/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/home/erfenjiao/web/newbee-mall-vue3-app-main/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/erfenjiao/web/newbee-mall-vue3-app-main/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCByZW5kZXJMaXN0IGFzIF9yZW5kZXJMaXN0LCBGcmFnbWVudCBhcyBfRnJhZ21lbnQsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVFbGVtZW50QmxvY2sgYXMgX2NyZWF0ZUVsZW1lbnRCbG9jaywgdG9EaXNwbGF5U3RyaW5nIGFzIF90b0Rpc3BsYXlTdHJpbmcsIGNyZWF0ZUVsZW1lbnRWTm9kZSBhcyBfY3JlYXRlRWxlbWVudFZOb2RlLCBjcmVhdGVCbG9jayBhcyBfY3JlYXRlQmxvY2ssIHB1c2hTY29wZUlkIGFzIF9wdXNoU2NvcGVJZCwgcG9wU2NvcGVJZCBhcyBfcG9wU2NvcGVJZCB9IGZyb20gInZ1ZSI7CmNvbnN0IF93aXRoU2NvcGVJZCA9IG4gPT4gKF9wdXNoU2NvcGVJZCgiZGF0YS12LTNjMWVmNjg0IiksIG4gPSBuKCksIF9wb3BTY29wZUlkKCksIG4pOwpjb25zdCBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAib3JkZXItYm94Igp9Owpjb25zdCBfaG9pc3RlZF8yID0gewogIGNsYXNzOiAiY29udGVudCIKfTsKY29uc3QgX2hvaXN0ZWRfMyA9IFsib25DbGljayJdOwpjb25zdCBfaG9pc3RlZF80ID0gewogIGNsYXNzOiAib3JkZXItaXRlbS1oZWFkZXIiCn07CmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgY29uc3QgX2NvbXBvbmVudF9zX2hlYWRlciA9IF9yZXNvbHZlQ29tcG9uZW50KCJzLWhlYWRlciIpOwogIGNvbnN0IF9jb21wb25lbnRfdmFuX3RhYiA9IF9yZXNvbHZlQ29tcG9uZW50KCJ2YW4tdGFiIik7CiAgY29uc3QgX2NvbXBvbmVudF92YW5fdGFicyA9IF9yZXNvbHZlQ29tcG9uZW50KCJ2YW4tdGFicyIpOwogIGNvbnN0IF9jb21wb25lbnRfdmFuX2NhcmQgPSBfcmVzb2x2ZUNvbXBvbmVudCgidmFuLWNhcmQiKTsKICBjb25zdCBfY29tcG9uZW50X3Zhbl9saXN0ID0gX3Jlc29sdmVDb21wb25lbnQoInZhbi1saXN0Iik7CiAgY29uc3QgX2NvbXBvbmVudF92YW5fcHVsbF9yZWZyZXNoID0gX3Jlc29sdmVDb21wb25lbnQoInZhbi1wdWxsLXJlZnJlc2giKTsKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfc19oZWFkZXIsIHsKICAgIG5hbWU6ICfmiJHnmoTorqLljZUnLAogICAgYmFjazogJy91c2VyJwogIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF92YW5fdGFicywgewogICAgb25DbGljazogJHNldHVwLm9uQ2hhbmdlVGFiLAogICAgY29sb3I6ICcjMWJhZWFlJywKICAgICJ0aXRsZS1hY3RpdmUtY29sb3IiOiAnIzFiYWVhZScsCiAgICBjbGFzczogIm9yZGVyLXRhYiIsCiAgICBtb2RlbFZhbHVlOiBfY3R4LnN0YXR1cywKICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzBdIHx8IChfY2FjaGVbMF0gPSAkZXZlbnQgPT4gX2N0eC5zdGF0dXMgPSAkZXZlbnQpCiAgfSwgewogICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X3Zhbl90YWIsIHsKICAgICAgdGl0bGU6ICLlhajpg6giLAogICAgICBuYW1lOiAiIgogICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X3Zhbl90YWIsIHsKICAgICAgdGl0bGU6ICLlvoXku5jmrL4iLAogICAgICBuYW1lOiAiMCIKICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF92YW5fdGFiLCB7CiAgICAgIHRpdGxlOiAi5b6F56Gu6K6kIiwKICAgICAgbmFtZTogIjEiCiAgICB9KSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfdmFuX3RhYiwgewogICAgICB0aXRsZTogIuW+heWPkei0pyIsCiAgICAgIG5hbWU6ICIyIgogICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X3Zhbl90YWIsIHsKICAgICAgdGl0bGU6ICLlt7Llj5HotKciLAogICAgICBuYW1lOiAiMyIKICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF92YW5fdGFiLCB7CiAgICAgIHRpdGxlOiAi5Lqk5piT5a6M5oiQIiwKICAgICAgbmFtZTogIjQiCiAgICB9KV0pLAogICAgXzogMSAvKiBTVEFCTEUgKi8KICB9LCA4IC8qIFBST1BTICovLCBbIm9uQ2xpY2siLCAibW9kZWxWYWx1ZSJdKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMiwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X3Zhbl9wdWxsX3JlZnJlc2gsIHsKICAgIG1vZGVsVmFsdWU6IF9jdHgucmVmcmVzaGluZywKICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzJdIHx8IChfY2FjaGVbMl0gPSAkZXZlbnQgPT4gX2N0eC5yZWZyZXNoaW5nID0gJGV2ZW50KSwKICAgIG9uUmVmcmVzaDogJHNldHVwLm9uUmVmcmVzaCwKICAgIGNsYXNzOiAib3JkZXItbGlzdC1yZWZyZXNoIgogIH0sIHsKICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF92YW5fbGlzdCwgewogICAgICBsb2FkaW5nOiBfY3R4LmxvYWRpbmcsCiAgICAgICJvblVwZGF0ZTpsb2FkaW5nIjogX2NhY2hlWzFdIHx8IChfY2FjaGVbMV0gPSAkZXZlbnQgPT4gX2N0eC5sb2FkaW5nID0gJGV2ZW50KSwKICAgICAgZmluaXNoZWQ6IF9jdHguZmluaXNoZWQsCiAgICAgICJmaW5pc2hlZC10ZXh0IjogIuayoeacieabtOWkmuS6hiIsCiAgICAgIG9uTG9hZDogJHNldHVwLm9uTG9hZCwKICAgICAgb25PZmZzZXQ6ICRldmVudCA9PiAxMAogICAgfSwgewogICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdChfY3R4Lmxpc3QsIChpdGVtLCBpbmRleCkgPT4gewogICAgICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIHsKICAgICAgICAgIGtleTogaW5kZXgsCiAgICAgICAgICBjbGFzczogIm9yZGVyLWl0ZW0tYm94IiwKICAgICAgICAgIG9uQ2xpY2s6ICRldmVudCA9PiAkc2V0dXAuZ29UbyhpdGVtLm9yZGVyTm8pCiAgICAgICAgfSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzQsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgbnVsbCwgIuiuouWNleaXtumXtO+8miIgKyBfdG9EaXNwbGF5U3RyaW5nKGl0ZW0uY3JlYXRlVGltZSksIDEgLyogVEVYVCAqLyksIF9jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCBudWxsLCBfdG9EaXNwbGF5U3RyaW5nKGl0ZW0ub3JkZXJTdGF0dXNTdHJpbmcpLCAxIC8qIFRFWFQgKi8pXSksIChfb3BlbkJsb2NrKHRydWUpLCBfY3JlYXRlRWxlbWVudEJsb2NrKF9GcmFnbWVudCwgbnVsbCwgX3JlbmRlckxpc3QoaXRlbS5uZXdCZWVNYWxsT3JkZXJJdGVtVk9TLCBvbmUgPT4gewogICAgICAgICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfdmFuX2NhcmQsIHsKICAgICAgICAgICAga2V5OiBvbmUub3JkZXJJZCwKICAgICAgICAgICAgbnVtOiBvbmUuZ29vZHNDb3VudCwKICAgICAgICAgICAgcHJpY2U6IG9uZS5zZWxsaW5nUHJpY2UsCiAgICAgICAgICAgIGRlc2M6ICLlhajlnLrljIXpgq4iLAogICAgICAgICAgICB0aXRsZTogb25lLmdvb2RzTmFtZSwKICAgICAgICAgICAgdGh1bWI6IF9jdHguJGZpbHRlcnMucHJlZml4KG9uZS5nb29kc0NvdmVySW1nKQogICAgICAgICAgfSwgbnVsbCwgOCAvKiBQUk9QUyAqLywgWyJudW0iLCAicHJpY2UiLCAidGl0bGUiLCAidGh1bWIiXSk7CiAgICAgICAgfSksIDEyOCAvKiBLRVlFRF9GUkFHTUVOVCAqLykpXSwgOCAvKiBQUk9QUyAqLywgX2hvaXN0ZWRfMyk7CiAgICAgIH0pLCAxMjggLyogS0VZRURfRlJBR01FTlQgKi8pKV0pLAoKICAgICAgXzogMSAvKiBTVEFCTEUgKi8KICAgIH0sIDggLyogUFJPUFMgKi8sIFsibG9hZGluZyIsICJmaW5pc2hlZCIsICJvbkxvYWQiXSldKSwKICAgIF86IDEgLyogU1RBQkxFICovCiAgfSwgOCAvKiBQUk9QUyAqLywgWyJtb2RlbFZhbHVlIiwgIm9uUmVmcmVzaCJdKV0pXSk7Cn0="},{"version":3,"mappings":";;;EAMOA,KAAK,EAAC;AAAW;;EAUfA,KAAK,EAAC;AAAS;;;EAUPA,KAAK,EAAC;AAAmB;;;;;;;;uBApBxCC,oBAqCM,OArCNC,UAqCM,GApCJC,aAAoDC;IAAzCC,IAAI,EAAE,MAAM;IAAGC,IAAI,EAAE;MAChCH,aAOWI;IAPAC,OAAK,EAAEC,kBAAW;IAAGC,KAAK,EAAE,SAAS;IAAG,oBAAkB,EAAE,SAAS;IAAEV,KAAK,EAAC,WAAW;gBAAUW,WAAM;+DAANA,WAAM;;sBACjH,MAAsC,CAAtCR,aAAsCS;MAA7BC,KAAK,EAAC,IAAI;MAACR,IAAI,EAAC;QACzBF,aAAwCS;MAA/BC,KAAK,EAAC,KAAK;MAACR,IAAI,EAAC;QAC1BF,aAAwCS;MAA/BC,KAAK,EAAC,KAAK;MAACR,IAAI,EAAC;QAC1BF,aAAwCS;MAA/BC,KAAK,EAAC,KAAK;MAACR,IAAI,EAAC;QAC1BF,aAAwCS;MAA/BC,KAAK,EAAC,KAAK;MAACR,IAAI,EAAC;QAC1BF,aAAyCS;MAAhCC,KAAK,EAAC,MAAM;MAACR,IAAI,EAAC;;;gDAE7BS,oBA0BM,OA1BNC,UA0BM,GAzBJZ,aAwBmBa;gBAxBQL,eAAU;+DAAVA,eAAU;IAAGM,SAAO,EAAER,gBAAS;IAAET,KAAK,EAAC;;sBAChE,MAsBW,CAtBXG,aAsBWe;MArBDC,OAAO,EAAER,YAAO;8DAAPA,YAAO;MACvBS,QAAQ,EAAET,aAAQ;MACnB,eAAa,EAAC,OAAO;MACpBU,MAAI,EAAEZ,aAAM;MACZa,QAAM,YAAE;;wBAEJ,MAA6B,oBAAlCrB,oBAcMsB,6BAduBZ,SAAI,GAApBa,IAAI,EAAEC,KAAK;6BAAxBxB,oBAcM;UAd8ByB,GAAG,EAAED,KAAK;UAAEzB,KAAK,EAAC,gBAAgB;UAAEQ,OAAK,YAAEC,WAAI,CAACe,IAAI,CAACG,OAAO;YAC9Fb,oBAGM,OAHNc,UAGM,GAFJd,oBAAuC,cAAjC,OAAK,oBAAGU,IAAI,CAACK,UAAU,kBAC7Bf,oBAAyC,+BAAhCU,IAAI,CAACM,iBAAiB,uCAEjC7B,oBAQEsB,6BAPcC,IAAI,CAACO,sBAAsB,EAAlCC,GAAG;+BADZC,aAQEC;YANCR,GAAG,EAAEM,GAAG,CAACG,OAAO;YAChBC,GAAG,EAAEJ,GAAG,CAACK,UAAU;YACnBC,KAAK,EAAEN,GAAG,CAACO,YAAY;YACxBC,IAAI,EAAC,MAAM;YACV3B,KAAK,EAAEmB,GAAG,CAACS,SAAS;YACpBC,KAAK,EAAE/B,aAAQ,CAACgC,MAAM,CAACX,GAAG,CAACY,aAAa","names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_s_header","name","back","_component_van_tabs","onClick","$setup","color","_ctx","_component_van_tab","title","_createElementVNode","_hoisted_2","_component_van_pull_refresh","onRefresh","_component_van_list","loading","finished","onLoad","onOffset","_Fragment","item","index","key","orderNo","_hoisted_4","createTime","orderStatusString","newBeeMallOrderItemVOS","one","_createBlock","_component_van_card","orderId","num","goodsCount","price","sellingPrice","desc","goodsName","thumb","prefix","goodsCoverImg"],"sourceRoot":"","sources":["/home/erfenjiao/web/newbee-mall-vue3-app-main/src/views/Order.vue"],"sourcesContent":["<!--\n\n *\n-->\n\n<template>\n  <div class=\"order-box\">\n    <s-header :name=\"'我的订单'\" :back=\"'/user'\"></s-header>\n    <van-tabs @click=\"onChangeTab\" :color=\"'#1baeae'\" :title-active-color=\"'#1baeae'\" class=\"order-tab\" v-model=\"status\">\n      <van-tab title=\"全部\" name=''></van-tab>\n      <van-tab title=\"待付款\" name=\"0\"></van-tab>\n      <van-tab title=\"待确认\" name=\"1\"></van-tab>\n      <van-tab title=\"待发货\" name=\"2\"></van-tab>\n      <van-tab title=\"已发货\" name=\"3\"></van-tab>\n      <van-tab title=\"交易完成\" name=\"4\"></van-tab>\n    </van-tabs>\n    <div class=\"content\">\n      <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\" class=\"order-list-refresh\">\n        <van-list\n          v-model:loading=\"loading\"\n          :finished=\"finished\"\n          finished-text=\"没有更多了\"\n          @load=\"onLoad\"\n          @offset=\"10\"\n        >\n          <div v-for=\"(item, index) in list\" :key=\"index\" class=\"order-item-box\" @click=\"goTo(item.orderNo)\">\n            <div class=\"order-item-header\">\n              <span>订单时间：{{ item.createTime }}</span>\n              <span>{{ item.orderStatusString }}</span>\n            </div>\n            <van-card\n              v-for=\"one in item.newBeeMallOrderItemVOS\"\n              :key=\"one.orderId\"\n              :num=\"one.goodsCount\"\n              :price=\"one.sellingPrice\"\n              desc=\"全场包邮\"\n              :title=\"one.goodsName\"\n              :thumb=\"$filters.prefix(one.goodsCoverImg)\"\n            />\n          </div>\n        </van-list>\n      </van-pull-refresh>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs } from 'vue';\nimport sHeader from '@/components/SimpleHeader'\nimport { getOrderList } from '@/service/order'\nimport { useRouter } from 'vue-router';\n\nexport default {\n  name: 'Order',\n  components: {\n    sHeader\n  },\n  setup() {\n    const router = useRouter()\n    const state = reactive({\n      status: '',\n      loading: false,\n      finished: false,\n      refreshing: false,\n      list: [],\n      page: 1,\n      totalPage: 0\n    })\n\n    const loadData = async () => {\n      const { data, data: { list } } = await getOrderList({ pageNumber: state.page, status: state.status })\n      state.list = state.list.concat(list)\n      state.totalPage = data.totalPage\n      state.loading = false;\n      if (state.page >= data.totalPage) state.finished = true\n    }\n\n    const onChangeTab = (name) => {\n      // 这里 Tab 最好采用点击事件，@click，如果用 @change 事件，会默认进来执行一次。\n      state.status = name\n      onRefresh()\n    }\n\n    const goTo = (id) => {\n      router.push({ path: '/order-detail', query: { id } })\n    }\n\n    const goBack = () => {\n      router.go(-1)\n    }\n\n    const onLoad = () => {\n      if (!state.refreshing && state.page < state.totalPage) {\n        console.log(state.page)\n        console.log(state.totalPage)\n        state.page = state.page + 1\n      }\n      if (state.refreshing) {\n        state.list = [];\n        state.refreshing = false;\n      }\n      loadData()\n    }\n\n    const onRefresh = () => {\n      state.refreshing = true\n      state.finished = false\n      state.loading = true\n      state.page = 1\n      onLoad()\n    }\n\n    return {\n      ...toRefs(state),\n      onChangeTab,\n      goTo,\n      goBack,\n      onLoad,\n      onRefresh\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  @import '../common/style/mixin';\n  .order-box {\n    .order-header {\n      position: fixed;\n      top: 0;\n      left: 0;\n      z-index: 10000;\n      .fj();\n      .wh(100%, 44px);\n      line-height: 44px;\n      padding: 0 10px;\n      .boxSizing();\n      color: #252525;\n      background: #fff;\n      border-bottom: 1px solid #dcdcdc;\n      .order-name {\n        font-size: 14px;\n      }\n    }\n    .order-tab {\n      position: fixed;\n      left: 0;\n      z-index: 1000;\n      width: 100%;\n      border-bottom: 1px solid #e9e9e9;\n    }\n    .skeleton {\n      margin-top: 60px;\n    }\n    .content {\n      height: calc(~\"(100vh - 70px)\");\n      overflow: hidden;\n      overflow-y: scroll; \n      margin-top: 34px;\n    }\n    .order-list-refresh {\n      .van-card__content {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n      }\n      .van-pull-refresh__head {\n        background: #f9f9f9;\n      }\n      .order-item-box {\n        margin: 20px 10px;\n        background-color: #fff;\n        .order-item-header {\n          padding: 10px 20px 0 20px;\n          display: flex;\n          justify-content: space-between;\n        }\n        .van-card {\n          background-color: #fff;\n          margin-top: 0;\n        }\n      }\n    }\n  }\n</style>\n"]}]}
{"remainingRequest":"/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/node_modules/babel-loader/lib/index.js!/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/src/views/ProductList.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/src/views/ProductList.vue","mtime":1663211991145},{"path":"/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/babel.config.js","mtime":1663084725000},{"path":"/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IHJlYWN0aXZlLCB0b1JlZnMgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VSb3V0ZSwgdXNlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCB7IHNlYXJjaCB9IGZyb20gJ0Avc2VydmljZS9nb29kJzsKZXhwb3J0IGRlZmF1bHQgewogIHNldHVwKCkgewogICAgY29uc3Qgcm91dGUgPSB1c2VSb3V0ZSgpOwogICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgICBjb25zdCBzdGF0ZSA9IHJlYWN0aXZlKHsKICAgICAga2V5d29yZDogcm91dGUucXVlcnkua2V5d29yZCB8fCAnJywKICAgICAgc2VhcmNoQnRuOiBmYWxzZSwKICAgICAgc2VjbGVjdEFjdGl2ZTogZmFsc2UsCiAgICAgIHJlZnJlc2hpbmc6IGZhbHNlLAogICAgICBsaXN0OiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGZpbmlzaGVkOiBmYWxzZSwKICAgICAgcHJvZHVjdExpc3Q6IFtdLAogICAgICB0b3RhbFBhZ2U6IDAsCiAgICAgIHBhZ2U6IDEsCiAgICAgIG9yZGVyQnk6ICcnCiAgICB9KTsKCiAgICAvLyBvbk1vdW50ZWQoKCkgPT4gewogICAgLy8gICBpbml0KCkKICAgIC8vIH0pCgogICAgY29uc3QgaW5pdCA9IGFzeW5jICgpID0+IHsKICAgICAgY29uc3QgewogICAgICAgIGNhdGVnb3J5SWQKICAgICAgfSA9IHJvdXRlLnF1ZXJ5OwogICAgICBpZiAoIWNhdGVnb3J5SWQgJiYgIXN0YXRlLmtleXdvcmQpIHsKICAgICAgICAvLyBUb2FzdC5mYWlsKCfor7fovpPlhaXlhbPplK7or40nKQogICAgICAgIHN0YXRlLmZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICBzdGF0ZS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IHsKICAgICAgICBkYXRhLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIGxpc3QKICAgICAgICB9CiAgICAgIH0gPSBhd2FpdCBzZWFyY2goewogICAgICAgIHBhZ2VOdW1iZXI6IHN0YXRlLnBhZ2UsCiAgICAgICAgZ29vZHNDYXRlZ29yeUlkOiBjYXRlZ29yeUlkLAogICAgICAgIGtleXdvcmQ6IHN0YXRlLmtleXdvcmQsCiAgICAgICAgb3JkZXJCeTogc3RhdGUub3JkZXJCeQogICAgICB9KTsKICAgICAgc3RhdGUucHJvZHVjdExpc3QgPSBzdGF0ZS5wcm9kdWN0TGlzdC5jb25jYXQobGlzdCk7CiAgICAgIHN0YXRlLnRvdGFsUGFnZSA9IGRhdGEudG90YWxQYWdlOwogICAgICBzdGF0ZS5sb2FkaW5nID0gZmFsc2U7CiAgICAgIGlmIChzdGF0ZS5wYWdlID49IGRhdGEudG90YWxQYWdlKSBzdGF0ZS5maW5pc2hlZCA9IHRydWU7CiAgICB9OwogICAgY29uc3QgZ29CYWNrID0gKCkgPT4gewogICAgICByb3V0ZXIuZ28oLTEpOwogICAgfTsKICAgIGNvbnN0IHByb2R1Y3REZXRhaWwgPSBpdGVtID0+IHsKICAgICAgcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6IGAvcHJvZHVjdC8ke2l0ZW0uZ29vZHNJZH1gCiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IGdldFNlYXJjaCA9ICgpID0+IHsKICAgICAgb25SZWZyZXNoKCk7CiAgICB9OwogICAgY29uc3Qgb25Mb2FkID0gKCkgPT4gewogICAgICBpZiAoIXN0YXRlLnJlZnJlc2hpbmcgJiYgc3RhdGUucGFnZSA8IHN0YXRlLnRvdGFsUGFnZSkgewogICAgICAgIHN0YXRlLnBhZ2UgPSBzdGF0ZS5wYWdlICsgMTsKICAgICAgfQogICAgICBpZiAoc3RhdGUucmVmcmVzaGluZykgewogICAgICAgIHN0YXRlLnByb2R1Y3RMaXN0ID0gW107CiAgICAgICAgc3RhdGUucmVmcmVzaGluZyA9IGZhbHNlOwogICAgICB9CiAgICAgIGluaXQoKTsKICAgIH07CiAgICBjb25zdCBvblJlZnJlc2ggPSAoKSA9PiB7CiAgICAgIHN0YXRlLnJlZnJlc2hpbmcgPSB0cnVlOwogICAgICBzdGF0ZS5maW5pc2hlZCA9IGZhbHNlOwogICAgICBzdGF0ZS5sb2FkaW5nID0gdHJ1ZTsKICAgICAgc3RhdGUucGFnZSA9IDE7CiAgICAgIG9uTG9hZCgpOwogICAgfTsKICAgIGNvbnN0IGNoYW5nZVRhYiA9IG5hbWUgPT4gewogICAgICBjb25zb2xlLmxvZygnbmFtZScsIG5hbWUpOwogICAgICBzdGF0ZS5vcmRlckJ5ID0gbmFtZTsKICAgICAgb25SZWZyZXNoKCk7CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgLi4udG9SZWZzKHN0YXRlKSwKICAgICAgZ29CYWNrLAogICAgICBwcm9kdWN0RGV0YWlsLAogICAgICBnZXRTZWFyY2gsCiAgICAgIGNoYW5nZVRhYiwKICAgICAgb25Mb2FkLAogICAgICBvblJlZnJlc2gKICAgIH07CiAgfQp9Ow=="},{"version":3,"mappings":"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","names":["reactive","toRefs","useRoute","useRouter","search","setup","route","router","state","keyword","query","searchBtn","seclectActive","refreshing","list","loading","finished","productList","totalPage","page","orderBy","init","categoryId","data","pageNumber","goodsCategoryId","concat","goBack","go","productDetail","item","push","path","goodsId","getSearch","onRefresh","onLoad","changeTab","name","console","log"],"sourceRoot":"","sources":["/home/erfenjiao/web/springboot+vue商城前后端分离+后台管理/newbee-mall-vue3-app-main/src/views/ProductList.vue"],"sourcesContent":["<!--\n\n *\n-->\n\n<template>\n  <div class=\"product-list-wrap\">\n    <div class=\"product-list-content\">\n      <header class=\"category-header wrap\">\n        <i class=\"nbicon nbfanhui\" @click=\"goBack\"></i>\n        <div class=\"header-search\">\n          <i class=\"nbicon nbSearch\"></i>\n          <input\n            type=\"text\"\n            class=\"search-title\"\n            v-model=\"keyword\"/>\n        </div>\n        <span class=\"search-btn\" @click=\"getSearch\">搜索</span>\n      </header>\n      <van-tabs type=\"card\" color=\"#1baeae\" @click=\"changeTab\" >\n        <van-tab title=\"推荐\" name=\"\"></van-tab>\n        <van-tab title=\"新品\" name=\"new\"></van-tab>\n        <van-tab title=\"价格\" name=\"price\"></van-tab>\n      </van-tabs>\n    </div>\n    <div class=\"content\">\n      <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\" class=\"product-list-refresh\">\n        <van-list\n          v-model:loading=\"loading\"\n          :finished=\"finished\"\n          :finished-text=\"productList.length ? '没有更多了' : '搜索想要的商品'\"\n          @load=\"onLoad\"\n          @offset=\"10\"\n        >\n          <!-- <p v-for=\"item in list\" :key=\"item\">{{ item }}</p> -->\n          <template v-if=\"productList.length\">\n            <div class=\"product-item\" v-for=\"(item, index) in productList\" :key=\"index\" @click=\"productDetail(item)\">\n              <img :src=\"$filters.prefix(item.goodsCoverImg)\" />\n              <div class=\"product-info\">\n                <p class=\"name\">{{item.goodsName}}</p>\n                <p class=\"subtitle\">{{item.goodsIntro}}</p>\n                <span class=\"price\">￥ {{item.sellingPrice}}</span>\n              </div>\n            </div>\n          </template>\n          <img class=\"empty\" v-else src=\"https://s.yezgea02.com/1604041313083/kesrtd.png\" alt=\"搜索\">\n        </van-list>\n      </van-pull-refresh>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { search } from '@/service/good'\nexport default {\n  setup() {\n    const route = useRoute()\n    const router = useRouter()\n    const state = reactive({\n      keyword: route.query.keyword || '',\n      searchBtn: false,\n      seclectActive: false,\n      refreshing: false,\n      list: [],\n      loading: false,\n      finished: false,\n      productList: [],\n      totalPage: 0,\n      page: 1,\n      orderBy: ''\n    })\n\n    // onMounted(() => {\n    //   init()\n    // })\n\n    const init = async () => {\n      const { categoryId } = route.query\n      if (!categoryId && !state.keyword) {\n        // Toast.fail('请输入关键词')\n        state.finished = true\n        state.loading = false;\n        return\n      }\n      const { data, data: { list } } = await search({ pageNumber: state.page, goodsCategoryId: categoryId, keyword: state.keyword, orderBy: state.orderBy })\n      \n      state.productList = state.productList.concat(list)\n      state.totalPage = data.totalPage\n      state.loading = false;\n      if (state.page >= data.totalPage) state.finished = true\n    }\n\n    const goBack = () => {\n      router.go(-1)\n    }\n\n    const productDetail = (item) => {\n      router.push({ path: `/product/${item.goodsId}` })\n    }\n\n    const getSearch = () => {\n      onRefresh()\n    }\n\n    const onLoad = () => {\n      if (!state.refreshing && state.page < state.totalPage) {\n        state.page = state.page + 1\n      }\n      if (state.refreshing) {\n        state.productList = [];\n        state.refreshing = false;\n      }\n      init()\n    }\n\n    const onRefresh = () => {\n      state.refreshing = true\n      state.finished = false\n      state.loading = true\n      state.page = 1\n      onLoad()\n    }\n\n    const changeTab = (name) => {\n      console.log('name', name)\n      state.orderBy = name\n      onRefresh()\n    }\n\n    return {\n      ...toRefs(state),\n      goBack,\n      productDetail,\n      getSearch,\n      changeTab,\n      onLoad,\n      onRefresh\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  @import '../common/style/mixin';\n  .product-list-content {\n    position: fixed;\n    left: 0;\n    top: 0;\n    width: 100%;\n    z-index: 1000;\n    background: #fff;\n    .category-header {\n      .fj();\n      width: 100%;\n      height: 50px;\n      line-height: 50px;\n      padding: 0 15px;\n      .boxSizing();\n      font-size: 15px;\n      color: #656771;\n      z-index: 10000;\n      &.active {\n        background: @primary;\n      }\n      .icon-left {\n        font-size: 25px;\n        font-weight: bold;\n      }\n      .header-search {\n        display: flex;\n        width: 76%;\n        height: 20px;\n        line-height: 20px;\n        margin: 10px 0;\n        padding: 5px 0;\n        color: #232326;\n        background: #F7F7F7;\n        .borderRadius(20px);\n        .nbSearch {\n          padding: 0 5px 0 20px;\n          font-size: 17px;\n        }\n        .search-title {\n          font-size: 12px;\n          color: #666;\n          background: #F7F7F7;\n        }\n    }\n    .icon-More {\n      font-size: 20px;\n    }\n    .search-btn {\n      height: 28px;\n      margin: 8px 0;\n      line-height: 28px;\n      padding: 0 5px;\n      color: #fff;\n      background: @primary;\n      .borderRadius(5px);\n      margin-top: 10px;\n    }\n  }\n}\n  .content {\n    height: calc(~\"(100vh - 70px)\");\n    overflow: hidden;\n    overflow-y: scroll; \n    margin-top: 78px;\n  }\n  .product-list-refresh {\n    .product-item {\n      .fj();\n      width: 100%;\n      height: 120px;\n      padding: 10px 0;\n      border-bottom: 1px solid #dcdcdc;\n      img {\n        width: 140px;\n        height: 120px;\n        padding: 0 10px;\n        .boxSizing();\n      }\n      .product-info {\n          width: 56%;\n          height: 120px;\n          padding: 5px;\n          text-align: left;\n          .boxSizing();\n          p {\n            margin: 0\n          }\n          .name {\n            width: 100%;\n            max-height: 40px;\n            line-height: 20px;\n            font-size: 15px;\n            color: #333;\n            overflow: hidden;\n            text-overflow:ellipsis;\n            white-space: nowrap;\n          }\n          .subtitle {\n            width: 100%;\n            max-height: 20px;\n            padding: 10px 0;\n            line-height: 25px;\n            font-size: 13px;\n            color: #999;\n            overflow: hidden;\n          }\n          .price {\n            color: @primary;\n            font-size: 16px;\n          }\n      }\n  }\n  .empty {\n    display: block;\n    width: 150px;\n    margin: 50px auto 20px;\n  }\n}\n</style>\n"]}]}
{"remainingRequest":"/home/erfenjiao/web/newbee-mall-vue3-app-main/node_modules/babel-loader/lib/index.js!/home/erfenjiao/web/newbee-mall-vue3-app-main/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/erfenjiao/web/newbee-mall-vue3-app-main/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/erfenjiao/web/newbee-mall-vue3-app-main/src/views/Setting.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/erfenjiao/web/newbee-mall-vue3-app-main/src/views/Setting.vue","mtime":1663211991320},{"path":"/home/erfenjiao/web/newbee-mall-vue3-app-main/babel.config.js","mtime":1663084725000},{"path":"/home/erfenjiao/web/newbee-mall-vue3-app-main/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/erfenjiao/web/newbee-mall-vue3-app-main/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/home/erfenjiao/web/newbee-mall-vue3-app-main/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/erfenjiao/web/newbee-mall-vue3-app-main/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJ2YW50L2VzL3RvYXN0L3N0eWxlIjsKaW1wb3J0IF9Ub2FzdCBmcm9tICJ2YW50L2VzL3RvYXN0IjsKaW1wb3J0IHsgcmVhY3RpdmUsIG9uTW91bnRlZCwgdG9SZWZzIH0gZnJvbSAndnVlJzsKaW1wb3J0IG1kNSBmcm9tICdqcy1tZDUnOwppbXBvcnQgc0hlYWRlciBmcm9tICdAL2NvbXBvbmVudHMvU2ltcGxlSGVhZGVyJzsKaW1wb3J0IHsgZ2V0VXNlckluZm8sIEVkaXRVc2VySW5mbywgbG9nb3V0IH0gZnJvbSAnQC9zZXJ2aWNlL3VzZXInOwppbXBvcnQgeyBzZXRMb2NhbCB9IGZyb20gJ0AvY29tbW9uL2pzL3V0aWxzJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIHNIZWFkZXIKICB9LAogIHNldHVwKCkgewogICAgY29uc3Qgc3RhdGUgPSByZWFjdGl2ZSh7CiAgICAgIG5pY2tOYW1lOiAnJywKICAgICAgaW50cm9kdWNlU2lnbjogJycsCiAgICAgIHBhc3N3b3JkOiAnJwogICAgfSk7CiAgICBvbk1vdW50ZWQoYXN5bmMgKCkgPT4gewogICAgICBjb25zdCB7CiAgICAgICAgZGF0YQogICAgICB9ID0gYXdhaXQgZ2V0VXNlckluZm8oKTsKICAgICAgc3RhdGUubmlja05hbWUgPSBkYXRhLm5pY2tOYW1lOwogICAgICBzdGF0ZS5pbnRyb2R1Y2VTaWduID0gZGF0YS5pbnRyb2R1Y2VTaWduOwogICAgfSk7CiAgICBjb25zdCBzYXZlID0gYXN5bmMgKCkgPT4gewogICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgaW50cm9kdWNlU2lnbjogc3RhdGUuaW50cm9kdWNlU2lnbiwKICAgICAgICBuaWNrTmFtZTogc3RhdGUubmlja05hbWUKICAgICAgfTsKICAgICAgaWYgKHN0YXRlLnBhc3N3b3JkKSB7CiAgICAgICAgcGFyYW1zLnBhc3N3b3JkTWQ1ID0gbWQ1KHN0YXRlLnBhc3N3b3JkKTsKICAgICAgfQogICAgICBhd2FpdCBFZGl0VXNlckluZm8ocGFyYW1zKTsKICAgICAgX1RvYXN0LnN1Y2Nlc3MoJ+S/neWtmOaIkOWKnycpOwogICAgfTsKICAgIGNvbnN0IGhhbmRsZUxvZ291dCA9IGFzeW5jICgpID0+IHsKICAgICAgY29uc3QgewogICAgICAgIHJlc3VsdENvZGUKICAgICAgfSA9IGF3YWl0IGxvZ291dCgpOwogICAgICBpZiAocmVzdWx0Q29kZSA9PSAyMDApIHsKICAgICAgICBzZXRMb2NhbCgndG9rZW4nLCAnJyk7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2hvbWUnOwogICAgICB9CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgLi4udG9SZWZzKHN0YXRlKSwKICAgICAgc2F2ZSwKICAgICAgaGFuZGxlTG9nb3V0CiAgICB9OwogIH0KfTs="},{"version":3,"mappings":";;AAmBA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,MAAK,QAAS,KAAI;AAChD,OAAOC,GAAE,MAAO,QAAO;AACvB,OAAOC,OAAM,MAAO,2BAA0B;AAC9C,SAASC,WAAW,EAAEC,YAAY,EAAEC,MAAK,QAAS,gBAAe;AACjE,SAASC,QAAO,QAAS,mBAAkB;AAE3C,eAAe;EACbC,UAAU,EAAE;IACVL;EACF,CAAC;EACDM,KAAK,GAAG;IACN,MAAMC,KAAI,GAAIX,QAAQ,CAAC;MACrBY,QAAQ,EAAE,EAAE;MACZC,aAAa,EAAE,EAAE;MACjBC,QAAQ,EAAE;IACZ,CAAC;IAEDb,SAAS,CAAC,YAAY;MACpB,MAAM;QAAEc;MAAK,IAAI,MAAMV,WAAW,EAAC;MACnCM,KAAK,CAACC,QAAO,GAAIG,IAAI,CAACH,QAAO;MAC7BD,KAAK,CAACE,aAAY,GAAIE,IAAI,CAACF,aAAY;IACzC,CAAC;IAED,MAAMG,IAAG,GAAI,YAAY;MACvB,MAAMC,MAAK,GAAI;QACbJ,aAAa,EAAEF,KAAK,CAACE,aAAa;QAClCD,QAAQ,EAAED,KAAK,CAACC;MAClB;MACA,IAAID,KAAK,CAACG,QAAQ,EAAE;QAClBG,MAAM,CAACC,WAAU,GAAIf,GAAG,CAACQ,KAAK,CAACG,QAAQ;MACzC;MACA,MAAMR,YAAY,CAACW,MAAM;MACzB,OAAME,OAAO,CAAC,MAAM;IACtB;IAEA,MAAMC,YAAW,GAAI,YAAY;MAC/B,MAAM;QAAEC;MAAW,IAAI,MAAMd,MAAM,EAAC;MACpC,IAAIc,UAAS,IAAK,GAAG,EAAE;QACrBb,QAAQ,CAAC,OAAO,EAAE,EAAE;QACpBc,MAAM,CAACC,QAAQ,CAACC,IAAG,GAAI,OAAM;MAC/B;IACF;IAEA,OAAO;MACL,GAAGtB,MAAM,CAACS,KAAK,CAAC;MAChBK,IAAI;MACJI;IACF;EACF;AACF","names":["reactive","onMounted","toRefs","md5","sHeader","getUserInfo","EditUserInfo","logout","setLocal","components","setup","state","nickName","introduceSign","password","data","save","params","passwordMd5","success","handleLogout","resultCode","window","location","href"],"sourceRoot":"","sources":["/home/erfenjiao/web/newbee-mall-vue3-app-main/src/views/Setting.vue"],"sourcesContent":["<!--\n\n *\n-->\n\n<template>\n  <div class=\"seting-box\">\n    <s-header :name=\"'账号管理'\"></s-header>\n    <div class=\"input-item\">\n      <van-field v-model=\"nickName\" label=\"昵称\" />\n      <van-field v-model=\"introduceSign\" label=\"个性签名\" />\n      <van-field v-model=\"password\" type='password' label=\"修改密码\" />\n    </div>\n    <van-button round class=\"save-btn\" color=\"#1baeae\" type=\"primary\" @click=\"save\" block>保存</van-button>\n    <van-button round class=\"save-btn\" color=\"#1baeae\" type=\"primary\" @click=\"handleLogout\" block>退出登录</van-button>\n  </div>\n</template>\n\n<script>\nimport { reactive, onMounted, toRefs } from 'vue'\nimport md5 from 'js-md5'\nimport sHeader from '@/components/SimpleHeader'\nimport { getUserInfo, EditUserInfo, logout } from '@/service/user'\nimport { setLocal } from '@/common/js/utils'\nimport { Toast } from 'vant'\nexport default {\n  components: {\n    sHeader\n  },\n  setup() {\n    const state = reactive({\n      nickName: '',\n      introduceSign: '',\n      password: ''\n    })\n\n    onMounted(async () => {\n      const { data } = await getUserInfo()\n      state.nickName = data.nickName\n      state.introduceSign = data.introduceSign\n    })\n\n    const save = async () => {\n      const params = {\n        introduceSign: state.introduceSign,\n        nickName: state.nickName\n      }\n      if (state.password) {\n        params.passwordMd5 = md5(state.password)\n      } \n      await EditUserInfo(params)\n      Toast.success('保存成功')\n    }\n\n    const handleLogout = async () => {\n      const { resultCode } = await logout()\n      if (resultCode == 200) {\n        setLocal('token', '')\n        window.location.href = '/home'\n      }\n    }\n\n    return {\n      ...toRefs(state),\n      save,\n      handleLogout\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .seting-box {\n    .save-btn {\n      width: 80%;\n      margin: 20px auto ;\n    }\n  }\n</style>\n"]}]}